ä¾èµ–


- [ ] ğŸ”½  ubuntuç³»ç»Ÿè¾“å…¥ä¸­æ–‡é—®é¢˜ï¼ŒiBus(ç›®å‰) | Fcitx
- [ ] â«  ä¸‹å‘é«˜é¢‘æ§åˆ¶å’Œé«˜é¢‘åŒæ­¥å§¿æ€çš„çº¿ç¨‹ä¼˜åŒ–
- [ ] ğŸ”¼  ç›®æ ‡å§¿æ€è§„åˆ’å¡é¡¿ï¼Œæ›´æ¢å®ç°æ–¹æ¡ˆ

## 3.1 ä¸‹å‘rvizæœºå™¨äººæ§åˆ¶
**è¯·æ±‚æ–¹å¼ï¼šRos Topic**
**æŒ‡ä»¤è¯´æ˜ï¼šä¸Šä½æœºä¸‹å‘æœºå™¨äººå…³èŠ‚ï¼Œæ§åˆ¶rvizæœºå™¨äººæ˜¾ç¤º**
**è¯é¢˜åç§°ï¼š/joint_states**
**å‘å¸ƒé¢‘ç‡ï¼šä¿¡å·è§¦å‘**
**æ¶ˆæ¯ç±»å‹ï¼šsensor_msgs/JointState**
```topic
std_msgs/Header header
string[] name       # å…³èŠ‚åç§°åˆ—è¡¨
float64[] position  # å…³èŠ‚ä½ç½®åˆ—è¡¨
float64[] velocity  # å…³èŠ‚é€Ÿåº¦åˆ—è¡¨
float64[] effort    # å…³èŠ‚åŠ›çŸ©åˆ—è¡¨
```
**æµ‹è¯•ç”¨ä¾‹ï¼š**
```shell
ros2 topic pub /joint_states sensor_msgs/JointState '{header: {stamp: {sec: 1720861606, nanosec: 489197117}, frame_id: ""}, name: ["right_joint1", "right_joint2", "right_joint3", "right_joint4", "right_joint5", "right_joint6", "right_joint7", "left_joint1", "left_joint2", "left_joint3", "left_joint4", "left_joint5", "left_joint6", "left_joint7"], position: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]}'



ros2 topic pub --once /joint_states sensor_msgs/JointState '{name: ["finger_joint"], position: [0.274340]}'



ros2 topic pub /joint_states sensor_msgs/JointState '{header: {stamp: {sec: 1720861606, nanosec: 489197117}, frame_id: ""}, name: ["right_joint1", "right_joint2", "right_joint3", "right_joint4", "right_joint5", "right_joint6", "right_joint7", "left_joint1", "left_joint2", "left_joint3", "left_joint4", "left_joint5", "left_joint6", "left_joint7"], position: [1.0, 1.0, 1.0, -1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]}'

ros2 topic echo /joint_states

ros2 topic pub  --once  /joint_states sensor_msgs/JointState '{name: ["lifting_base_joint", "right_tool_joint1", "right_tool_joint2", "gimbal_joint1", "gimbal_joint2"], position: [0.4, 0.05, 0.05, 30.0, 20.0]}'

ros2 topic pub  --once  /joint_states sensor_msgs/JointState '{name: ["lifting_base_joint", "right_tool_joint1", "right_tool_joint2", "gimbal_joint1", "gimbal_joint2"], position: [0.0, 0.0, 0.0, 0.0, 0.0]}'
```
## 3.2 ä¸‹å‘sim ros2controlæœºå™¨å·¦è‡‚æ§åˆ¶
**è¯·æ±‚æ–¹å¼ï¼šRos Topic**
**æŒ‡ä»¤è¯´æ˜ï¼šä¸Šä½æœºä¸‹å‘æœºå™¨äººå…³èŠ‚ï¼Œæ§åˆ¶rvizå’Œgazeboæœºå™¨äººï¼Œros2control**
**è¯é¢˜åç§°ï¼š/l_arm_controller/joint_trajectory**
**å‘å¸ƒé¢‘ç‡ï¼šä¿¡å·è§¦å‘**
**æ¶ˆæ¯ç±»å‹ï¼štrajectory_msgs/msg/JointTrajectory**
```topic
HeaderÂ header  
string[]Â joint_names  
JointTrajectoryPoint[]Â points
	float64[]Â positions  
	float64[]Â velocities  
	float64[]Â accelerations  
	float64[]Â effort  
	durationÂ time_from_start
```
**æµ‹è¯•ç”¨ä¾‹ï¼š**
```shell
ros2 topic pub /l_arm_controller/joint_trajectory trajectory_msgs/msg/JointTrajectory '{joint_names: ["left_joint1", "left_joint2", "left_joint3", "left_joint4", "left_joint5", "left_joint6", "left_joint7"], points: [{positions: [1.0, 1.0, 1.0, 1.0, 0.5, 1.0, 1.0], velocities: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], accelerations: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]}]}'
```
[[6 Gazebo#3.2.2 æ£€æŸ¥æ§åˆ¶å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ]]
## 3.3 ä¸‹å‘sim ros2controlæœºå™¨å³è‡‚æ§åˆ¶
**è¯·æ±‚æ–¹å¼ï¼šRos Topic**
**æŒ‡ä»¤è¯´æ˜ï¼šä¸Šä½æœºä¸‹å‘æœºå™¨äººå…³èŠ‚ï¼Œæ§åˆ¶rvizå’Œgazeboæœºå™¨äººï¼Œros2control**
**è¯é¢˜åç§°ï¼š/r_arm_controller/joint_trajectory**
**å‘å¸ƒé¢‘ç‡ï¼šä¿¡å·è§¦å‘**
**æ¶ˆæ¯ç±»å‹ï¼štrajectory_msgs/msg/JointTrajectory**
```topic
HeaderÂ header  
string[]Â joint_names  
JointTrajectoryPoint[]Â points
	float64[]Â positions  
	float64[]Â velocities  
	float64[]Â accelerations  
	float64[]Â effort  
	durationÂ time_from_start
```
**æµ‹è¯•ç”¨ä¾‹ï¼š**
```shell
ros2 topic pub /r_arm_controller/joint_trajectory trajectory_msgs/msg/JointTrajectory '{joint_names: ["zmebot_right_arm_joint_1", "zmebot_right_arm_joint_2", "zmebot_right_arm_joint_3", "zmebot_right_arm_joint_4", "zmebot_right_arm_joint_5", "zmebot_right_arm_joint_6", "zmebot_right_arm_gripper_joint"], points: [{positions: [1.0, 1.0, 1.0, 1.0, 0.5, 1.0, 1.0], velocities: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], accelerations: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]}]}'
```
[[6 Gazebo#3.2.2 æ£€æŸ¥æ§åˆ¶å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ]]
## 3.4 æ›´æ–°Moveitä¸‹æœºå™¨äººèµ·å§‹å§¿æ€
**è¯·æ±‚æ–¹å¼ï¼šRos Topic**
**æŒ‡ä»¤è¯´æ˜ï¼šæ›´æ–°Moveitä¸‹æœºå™¨äººèµ·å§‹å§¿æ€**
**è¯é¢˜åç§°ï¼š/rviz/moveit/update_custom_start_state moveit_msgs/msg/RobotState**
**å‘å¸ƒé¢‘ç‡ï¼šä¿¡å·è§¦å‘**
**æ¶ˆæ¯ç±»å‹ï¼šmoveit_msgs/msg/RobotState**
```topic
#Â ThisÂ messageÂ containsÂ informationÂ aboutÂ theÂ robotÂ state,Â i.e.Â theÂ positionsÂ ofÂ itsÂ jointsÂ andÂ links  
sensor_msgs/JointStateÂ joint_state  
  
#Â JointsÂ thatÂ mayÂ haveÂ multipleÂ DOFÂ areÂ specifiedÂ here  
sensor_msgs/MultiDOFJointStateÂ multi_dof_joint_state  
  
#Â AttachedÂ collisionÂ objectsÂ (attachedÂ toÂ someÂ linkÂ onÂ theÂ robot)  
AttachedCollisionObject[]Â attached_collision_objects  
  
#Â FlagÂ indicatingÂ whetherÂ thisÂ sceneÂ isÂ toÂ beÂ interpretedÂ asÂ aÂ diffÂ withÂ respectÂ toÂ someÂ otherÂ scene  
#Â ThisÂ isÂ mostlyÂ importantÂ forÂ handlingÂ theÂ attachedÂ bodiesÂ (whetherÂ orÂ notÂ toÂ clearÂ theÂ attachedÂ bodies  
#Â ofÂ aÂ moveit::core::RobotStateÂ beforeÂ updatingÂ itÂ withÂ thisÂ message)  
boolÂ is_diff
```
**æµ‹è¯•ç”¨ä¾‹ï¼š**
```shell
ros2 topic pub --once /rviz/moveit/update_custom_start_state moveit_msgs/msg/RobotState "{
  joint_state: {
    name: [
      'right_joint1',
      'right_joint2',
      'right_joint3',
      'right_joint4',
      'right_joint5',
      'right_joint6',
      'right_joint7',
      'left_joint1',
      'left_joint2',
      'left_joint3',
      'left_joint4',
      'left_joint5',
      'left_joint6',
      'left_joint7'
    ],
    position: [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}"
```

```shell
ros2 topic pub --once /rviz/moveit/update_custom_goal_state moveit_msgs/msg/RobotState "{
  joint_state: {
    name: [
      'right_joint1',
      'right_joint2',
      'right_joint3',
      'right_joint4',
      'right_joint5',
      'right_joint6',
      'right_joint7',
      'left_joint1',
      'left_joint2',
      'left_joint3',
      'left_joint4',
      'left_joint5',
      'left_joint6',
      'left_joint7'
    ],
    position: [
      0.7,
      0.7,
      0.3,
      -0.3,
      0.3,
      0.3,
      0.3,
      0.3,
      0.3,
      0.3,
      -0.3,
      0.3,
      0.3,
      0.3
    ]
  }
}"
```

```shell
ros2 topic pub --once /rviz/moveit/update_custom_start_state moveit_msgs/msg/RobotState "{
  joint_state: {
    name: [
      'left_joint1',
      'left_joint2',
      'left_joint3',
      'left_joint4',
      'left_joint5',
      'left_joint6',
      'left_joint7'
    ],
    position: [
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0,
      0.0
    ]
  }
}"



ros2 topic pub --once /rviz/moveit/update_custom_start_state moveit_msgs/msg/RobotState "{
  joint_state: {
    name: [
      'right_joint1',
      'right_joint2',
      'right_joint3',
      'right_joint4',
      'right_joint5',
      'right_joint6',
      'right_joint7'
    ],
    position: [
      0.3,
      0.3,
      0.3,
      -0.3,
      0.3,
      0.3,
      0.3
    ]
  }
}"
```

## 3.4 æ§åˆ¶åº•ç›˜ä½ç½®å’Œå§¿æ€

```shell
ros2 topic pub --once /tf_static tf2_msgs/TFMessage "
transforms:
- header:
    stamp: {sec: 0, nanosec: 0}  # Use current time in practice
    frame_id: 'world'
  child_frame_id: 'base_link'
  transform:
    translation:
      x: 1.0
      y: 2.0
      z: 3.0
    rotation:
      x: 0.0
      y: 0.0
      z: 0.0
      w: 1.0
"
```
# ä¸´æ—¶ï¼š

åº•ç›˜
```shell
ros2 topic pub --once  /tf_static tf2_msgs/msg/TFMessage '
transforms:
  - header:
      stamp: {sec: 0, nanosec: 0}
      frame_id: "world"  # çˆ¶åæ ‡ç³»
    child_frame_id: "zmebot_arm_base"  # å­åæ ‡ç³»
    transform:
      translation: {x: 4.0, y: 3.0, z: 2.0}  # æ–°çš„ä½ç½®åæ ‡
      rotation: {x: 0.0, y: 0.0, z: 0.0, w: 1.0}  # æ–°çš„æ—‹è½¬è§’åº¦'
```


```shell
# å¯¹åº”Planè½¨è¿¹
ros2 topic echo /display_planned_path
# å¯¹åº”Executeè½¨è¿¹
ros2 topic echo /l_arm_controller/follow_joint_trajectory/_action/feedback

# å¯¹åº”ExecuteæŒ‰é’®
ros2 topic echo /execute_trajectory/_action/feedback
# å¯¹åº”Planå’ŒPlaun & ExecuteæŒ‰é’®ï¼Œå­˜å‚¨èµ·å§‹ç‚¹å’Œç›®æ ‡ç‚¹
ros2 topic echo /motion_plan_request
# å¯¹åº”Executeå’ŒPlan & ExecuteæŒ‰é’®
ros2 topic echo /execute_trajectory/_action/status
```